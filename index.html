<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clockenflap 2025 Interactive Schedule</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --text-color: #ffffff;
            --accent-pink: #ff0055;
            --accent-teal: #00cccc;
            --slot-bg: #333;
            --slot-hover: #444;
            --border-color: #444;
            --modal-bg: #222;
        }

        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Header & Tabs */
        header {
            padding: 20px;
            text-align: center;
            background: #000;
            border-bottom: 2px solid var(--accent-pink);
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .tab-btn {
            background: transparent;
            border: 2px solid var(--accent-teal);
            color: var(--accent-teal);
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            text-transform: uppercase;
            transition: all 0.3s;
        }

        .tab-btn.active, .tab-btn:hover {
            background: var(--accent-teal);
            color: #000;
        }

        /* Schedule Grid Container */
        .schedule-container {
            overflow-x: auto;
            padding: 20px;
            position: relative;
        }

        .timeline-wrapper {
            position: relative;
            min-width: 1000px; /* Ensures horizontal scroll on mobile */
            border-left: 100px solid var(--bg-color); /* Space for Stage Names */
        }

        /* Grid Headers (Times) */
        .time-header {
            display: flex;
            margin-bottom: 10px;
            padding-left: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .time-marker {
            flex: 1;
            font-size: 0.8rem;
            color: #888;
            border-left: 1px solid #333;
            padding-left: 5px;
            height: 20px;
        }

        /* Stages Rows */
        .stage-row {
            position: relative;
            height: 80px;
            margin-bottom: 10px;
            border-bottom: 1px solid #333;
        }

        .stage-name {
            position: absolute;
            left: -100px;
            width: 90px;
            top: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-weight: bold;
            font-size: 0.9rem;
            color: var(--accent-pink);
            text-align: right;
        }

        /* Time Slots */
        .time-slot {
            position: absolute;
            top: 5px;
            bottom: 5px;
            background-color: var(--slot-bg);
            border-left: 3px solid var(--accent-teal);
            border-radius: 4px;
            padding: 5px;
            font-size: 0.75rem;
            cursor: pointer;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            transition: transform 0.2s, background 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
            color: #fff;
        }

        .time-slot:hover {
            background-color: var(--slot-hover);
            transform: scale(1.02);
            z-index: 10;
            border-left-color: var(--accent-pink);
        }

        .slot-time {
            font-size: 0.65rem;
            color: #ccc;
            display: block;
            margin-bottom: 2px;
        }

        .slot-artist {
            font-weight: bold;
        }

        /* Modal / Popup */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal {
            background: var(--modal-bg);
            width: 90%;
            max-width: 400px;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--accent-teal);
            text-align: center;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 204, 204, 0.2);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #888;
        }
        .close-btn:hover { color: #fff; }

        .modal-img-container {
            width: 100%;
            height: 200px;
            background-color: #000;
            margin-bottom: 15px;
            display: none; /* Hidden by default, shown via JS */
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-radius: 4px;
        }

        .modal-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal h2 {
            margin: 0 0 10px 0;
            color: var(--accent-pink);
        }

        .modal p {
            margin: 5px 0;
            color: #ccc;
        }

    </style>
</head>
<body>

<header>
    <h1>CLOCKENFLAP 2025</h1>
    <div class="tabs">
        <button class="tab-btn active" onclick="renderSchedule('Fri')">Friday</button>
        <button class="tab-btn" onclick="renderSchedule('Sat')">Saturday</button>
        <button class="tab-btn" onclick="renderSchedule('Sun')">Sunday</button>
    </div>
</header>

<div class="schedule-container">
    <div class="timeline-wrapper" id="timeline-wrapper">
        </div>
</div>

<div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
    <div class="modal" id="modal-content">
        <span class="close-btn" onclick="closeModal(event)">&times;</span>
        
        <div class="modal-img-container" id="modal-img-container">
            <img src="" alt="Artist" class="modal-img" id="modal-img">
        </div>

        <h2 id="modal-artist">Artist Name</h2>
        <p id="modal-stage">Stage Name</p>
        <p id="modal-time">Time</p>
    </div>
</div>

<script>
    // --- 1. The Corrected Data ---
    const rawData = [
      {d: "Fri", s: "Harbourflap Stage", a: "PANTHER CHAN 陳蕾 (HK)", t: "18:20-19:15"},
      {d: "Fri", s: "Harbourflap Stage", a: "JACOB COLLIER (UK)", t: "20:00-21:00"},
      {d: "Fri", s: "Harbourflap Stage", a: "VAUNDY (JP)", t: "21:45-22:45"},
      {d: "Fri", s: "Orbit Stage", a: "MOON TANG (HK)", t: "17:45-18:30"},
      {d: "Fri", s: "Orbit Stage", a: "PASSENGER (UK)", t: "19:15-20:00"},
      {d: "Fri", s: "Orbit Stage", a: "SPARKS (US)", t: "20:45-22:00"},
      {d: "Fri", s: "Park Stage", a: "關勁松的ASTROLOGY (HK)", t: "17:45-18:30"},
      {d: "Fri", s: "Park Stage", a: "WENDY WANDER (TW)", t: "19:15-20:15"},
      {d: "Fri", s: "Park Stage", a: "DIGITALISM DJ SET (DE)", t: "21:00-22:30"},
      {d: "Fri", s: "Robot Stage", a: "MVSX (LIVE/DJ) (HK)", t: "17:00-18:00"},
      {d: "Fri", s: "Robot Stage", a: "ANDY-S & THE HEMAN (REACH4LUV) (HK)", t: "18:00-19:00"},
      {d: "Fri", s: "Robot Stage", a: "HUGO BELLOY (HK)", t: "19:00-20:00"},
      {d: "Fri", s: "Robot Stage", a: "GOLOW (HK)", t: "20:00-21:00"},
      {d: "Fri", s: "Robot Stage", a: "AZABU PUNKS (JP/HK)", t: "21:00-22:30"},
      {d: "Fri", s: "Silent Disco", a: "R&B HOURS", t: "18:00-19:00"},
      {d: "Fri", s: "Silent Disco", a: "SEIRYŪ", t: "19:00-20:00"},
      {d: "Fri", s: "Silent Disco", a: "STEFFUN", t: "20:00-21:00"},
      {d: "Fri", s: "Silent Disco", a: "DJ BOBBY PARSLEY", t: "21:00-22:00"},
      {d: "Fri", s: "Silent Disco", a: "GYRO", t: "22:00-23:00"},
      {d: "Fri", s: "Minimax", a: "ACT 1", t: "17:40-18:20"},
      {d: "Fri", s: "Minimax", a: "ACT 2", t: "19:15-20:00"},
      {d: "Fri", s: "Minimax", a: "ACT 3", t: "21:00-21:45"},
      {d: "Sat", s: "Harbourflap Stage", a: "JFFT X BILLY CHOI X KI CHAN (HK)", t: "13:30-14:15"},
      {d: "Sat", s: "Harbourflap Stage", a: "ROBOT SWING (TW)", t: "15:00-15:45"},
      {d: "Sat", s: "Harbourflap Stage", a: "KENTO NAKAJIMA 中島健人 (JP)", t: "16:30-17:15"},
      {d: "Sat", s: "Harbourflap Stage", a: "L'IMPÉRATRICE (FR)", t: "18:00-19:00"},
      {d: "Sat", s: "Harbourflap Stage", a: "RICH BRIAN (ID)", t: "20:00-21:00"},
      {d: "Sat", s: "Harbourflap Stage", a: "BLOC PARTY (UK)", t: "21:40-22:55"},
      {d: "Sat", s: "Orbit Stage", a: "LAI YING 麗英 x FOUNTAIN DE CHOPIN (HK)", t: "14:30-15:15"},
      {d: "Sat", s: "Orbit Stage", a: "PHUM VIPHURIT (TH)", t: "16:00-16:45"},
      {d: "Sat", s: "Orbit Stage", a: "CHILLI BEANS. (JP)", t: "17:30-18:15"},
      {d: "Sat", s: "Orbit Stage", a: "BETH GIBBONS (UK)", t: "19:00-20:00"},
      {d: "Sat", s: "Orbit Stage", a: "ANO (JP)", t: "21:00-21:45"},
      {d: "Sat", s: "Park Stage", a: "YROCK (HK)", t: "13:15-13:45"},
      {d: "Sat", s: "Park Stage", a: "BEFORE THE NIGHT ENDS (HK)", t: "14:15-14:45"},
      {d: "Sat", s: "Park Stage", a: "AKASAKI (JP)", t: "15:30-16:15"},
      {d: "Sat", s: "Park Stage", a: "SOCCER MOMMY (US)", t: "17:00-17:45"},
      {d: "Sat", s: "Park Stage", a: "RIKON 離婚伝説 (JP)", t: "18:30-19:15"},
      {d: "Sat", s: "Park Stage", a: "BOLIS PUPUL (BE)", t: "20:00-21:00"},
      {d: "Sat", s: "Park Stage", a: "DAVE CLARKE (UK)", t: "21:15-22:45"},
      {d: "Sat", s: "Robot Stage", a: "A-AMARC (HK)", t: "17:00-18:00"},
      {d: "Sat", s: "Robot Stage", a: "KATAGYAL (HK)", t: "18:00-19:00"},
      {d: "Sat", s: "Robot Stage", a: "UMAMI TAKEOVER (HK)", t: "19:00-20:00"},
      {d: "Sat", s: "Robot Stage", a: "0159 (HK)", t: "20:00-21:00"},
      {d: "Sat", s: "Robot Stage", a: "DISTRIKT (Faxtory, Jordy Lee, Scott B) (HK)", t: "21:00-22:30"},
      {d: "Sat", s: "Silent Disco", a: "MASABI", t: "14:00-15:00"},
      {d: "Sat", s: "Silent Disco", a: "DLULU", t: "15:00-16:00"},
      {d: "Sat", s: "Silent Disco", a: "YUEN CHI CHUNG", t: "16:00-17:00"},
      {d: "Sat", s: "Silent Disco", a: "TIGA", t: "17:00-18:00"},
      {d: "Sat", s: "Silent Disco", a: "JOHNNY UTAH", t: "18:00-19:00"},
      {d: "Sat", s: "Silent Disco", a: "DIAMOND", t: "19:00-20:00"},
      {d: "Sat", s: "Silent Disco", a: "MARK T", t: "20:00-21:00"},
      {d: "Sat", s: "Silent Disco", a: "BAD BAMBINO", t: "21:00-22:00"},
      {d: "Sat", s: "Minimax", a: "ACT 1", t: "15:45-16:30"},
      {d: "Sat", s: "Minimax", a: "ACT 2", t: "17:15-18:00"},
      {d: "Sat", s: "Minimax", a: "ACT 3", t: "19:00-20:00"},
      {d: "Sun", s: "Harbourflap Stage", a: "ULTRA LOUNGE - DJ KULU TRIBUTE (HK)", t: "13:15-14:15"},
      {d: "Sun", s: "Harbourflap Stage", a: "JACE 陳凱詠 (HK)", t: "15:15-16:00"},
      {d: "Sun", s: "Harbourflap Stage", a: "JEREMY ZUCKER (US)", t: "16:45-17:30"},
      {d: "Sun", s: "Harbourflap Stage", a: "FRANZ FERDINAND (UK)", t: "18:15-19:15"},
      {d: "Sun", s: "Harbourflap Stage", a: "JUD 陳泳希 (TW)", t: "19:55-20:15"},
      {d: "Sun", s: "Harbourflap Stage", a: "YOGA LIN 林宥嘉 (TW)", t: "20:15-21:00"},
      {d: "Sun", s: "Harbourflap Stage", a: "MY BLOODY VALENTINE (UK)", t: "21:45-22:45"},
      {d: "Sun", s: "Orbit Stage", a: "ANDR (TW)", t: "14:30-15:15"},
      {d: "Sun", s: "Orbit Stage", a: "MARCIN (PL)", t: "16:00-16:45"},
      {d: "Sun", s: "Orbit Stage", a: "TV GIRL (US)", t: "17:30-18:15"},
      {d: "Sun", s: "Orbit Stage", a: "GODSPEED YOU! BLACK EMPEROR (CA)", t: "19:15-20:15"},
      {d: "Sun", s: "Orbit Stage", a: "ELLEGARDEN (JP)", t: "21:00-22:00"},
      {d: "Sun", s: "Park Stage", a: "ERIC'S WEEKEND 小明的假日週末 (HK)", t: "13:30-14:00"},
      {d: "Sun", s: "Park Stage", a: "PUULUUP (EE)", t: "14:45-15:30"},
      {d: "Sun", s: "Park Stage", a: "BRIGHT EYES (US)", t: "16:30-17:15"},
      {d: "Sun", s: "Park Stage", a: "M4GANG 摩四青年 WITH SPECIAL GUESTS FAMA 農夫 (HK)", t: "18:00-19:10"},
      {d: "Sun", s: "Park Stage", a: "RIRIA (UK)", t: "19:30-21:00"},
      {d: "Sun", s: "Park Stage", a: "SPECIAL REQUEST (UK)", t: "21:00-22:30"},
      {d: "Sun", s: "Robot Stage", a: "ELEKTRO MÜLL (HK)", t: "17:00-17:45"},
      {d: "Sun", s: "Robot Stage", a: "RSD (UK)", t: "18:00-19:30"},
      {d: "Sun", s: "Robot Stage", a: "WENDY WENN (HK)", t: "19:30-20:30"},
      {d: "Sun", s: "Robot Stage", a: "MEAN GURLS CLUB (HK)", t: "20:30-21:30"},
      {d: "Sun", s: "Silent Disco", a: "RICHIE", t: "14:00-15:00"},
      {d: "Sun", s: "Silent Disco", a: "ROGUE MOTION", t: "17:00-18:00"},
      {d: "Sun", s: "Silent Disco", a: "WONG CHI CHUNG", t: "18:00-19:00"},
      {d: "Sun", s: "Silent Disco", a: "CHARLIEWO", t: "20:00-21:00"},
      {d: "Sun", s: "Minimax", a: "ACT 1", t: "16:00-16:45"},
      {d: "Sun", s: "Minimax", a: "ACT 2", t: "17:30-18:15"},
      {d: "Sun", s: "Minimax", a: "ACT 3", t: "19:15-19:55"}
    ];

    /* NOTE ON IMAGES:
       To add images, modify the `rawData` array above. Add an `img` property to the object.
       Example:
       {d: "Fri", s: "Harbourflap Stage", a: "VAUNDY (JP)", t: "21:45-22:45", img: "https://example.com/vaundy.jpg"},
       
       If no 'img' property is found, the modal will simply not display an image.
    */

    // --- 2. Configuration & Helpers ---
    const stages = [
        "Harbourflap Stage", "Orbit Stage", "Park Stage", 
        "Robot Stage", "Silent Disco", "Minimax"
    ];

    // Grid Start/End times (in hours, e.g., 13 = 1pm, 23 = 11pm)
    const GRID_START_HOUR = 13; 
    const GRID_END_HOUR = 23.5; // 11:30 PM
    const TOTAL_HOURS = GRID_END_HOUR - GRID_START_HOUR;

    function timeToHours(timeStr) {
        // "18:20" -> 18.33
        const [h, m] = timeStr.split(':').map(Number);
        return h + (m / 60);
    }

    function getPosition(timeStr) {
        // Returns percentage (0 to 100)
        const val = timeToHours(timeStr);
        return ((val - GRID_START_HOUR) / TOTAL_HOURS) * 100;
    }

    function parseTimeRange(rangeStr) {
        const [start, end] = rangeStr.split('-');
        return { start, end };
    }

    // --- 3. Render Functions ---

    function renderSchedule(day) {
        // Update Tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.classList.toggle('active', btn.innerText.includes(day === 'Fri' ? 'Friday' : day === 'Sat' ? 'Saturday' : 'Sunday'));
        });

        const container = document.getElementById('timeline-wrapper');
        container.innerHTML = '';

        // Filter Data
        const dayData = rawData.filter(item => item.d === day);

        // A. Render Time Headers
        const headerRow = document.createElement('div');
        headerRow.className = 'time-header';
        
        // Generate headers dynamically based on grid size
        for (let h = GRID_START_HOUR; h <= Math.floor(GRID_END_HOUR); h++) {
            const marker = document.createElement('div');
            marker.className = 'time-marker';
            marker.innerText = `${h}:00`;
            headerRow.appendChild(marker);
        }
        container.appendChild(headerRow);

        // B. Render Stages
        stages.forEach(stage => {
            const stageRow = document.createElement('div');
            stageRow.className = 'stage-row';

            // Label
            const label = document.createElement('div');
            label.className = 'stage-name';
            label.innerText = stage;
            stageRow.appendChild(label);

            // Acts
            const acts = dayData.filter(item => item.s.toUpperCase() === stage.toUpperCase());
            
            acts.forEach(act => {
                const times = parseTimeRange(act.t);
                const startPct = getPosition(times.start);
                const endPct = getPosition(times.end);
                const width = endPct - startPct;

                const slot = document.createElement('div');
                slot.className = 'time-slot';
                slot.style.left = `${startPct}%`;
                slot.style.width = `${width}%`;
                
                // Add click event for Modal
                slot.onclick = () => openModal(act);

                slot.innerHTML = `
                    <span class="slot-time">${act.t}</span>
                    <span class="slot-artist">${act.a}</span>
                `;
                stageRow.appendChild(slot);
            });

            container.appendChild(stageRow);
        });
    }

    // --- 4. Modal Logic ---
    const modalOverlay = document.getElementById('modal-overlay');
    const modalArtist = document.getElementById('modal-artist');
    const modalStage = document.getElementById('modal-stage');
    const modalTime = document.getElementById('modal-time');
    const modalImgContainer = document.getElementById('modal-img-container');
    const modalImg = document.getElementById('modal-img');

    function openModal(act) {
        modalArtist.innerText = act.a;
        modalStage.innerText = act.s;
        modalTime.innerText = `${act.d} | ${act.t}`;
        
        // Image Logic: If 'img' exists in data, show it. Else hide container.
        if (act.img) {
            modalImg.src = act.img;
            modalImgContainer.style.display = 'flex';
        } else {
            modalImgContainer.style.display = 'none';
        }

        modalOverlay.style.display = 'flex';
    }

    function closeModal(e) {
        // Close if clicked overlay or x button
        if (e.target === modalOverlay || e.target.classList.contains('close-btn')) {
            modalOverlay.style.display = 'none';
        }
    }

    // --- Init ---
    renderSchedule('Fri'); // Default view

</script>

</body>
</html>
